# 执行依赖

除了进行运算有依赖（比如 `a + b` 的结果依赖于 `a` 和 `b`），运行一段代码也有依赖。

## 各种执行依赖

### If 语句的执行依赖

比如以下代码中，`effect()` 的执行依赖于 `a` 的值为真值：

```js
if (a) effect();
```

### 函数调用的执行依赖

函数调用也是一种执行依赖。比如以下代码中，`effect()` 的执行依赖于 `f()` 的执行：

```js
function f() {
  effect();
}
f();
```

### 特殊的执行依赖

还有一些比较特别的执行依赖，比如：

```js
const obj = { x: 1 }(({ [effect1()]: _unused } = obj));

obj[effect2()] = 2;
```

其中，`effect1()` 和 `effect2()` 的执行依赖于 `obj` 是一个可以解构的 object，否则运行时直接报错了。

## 嵌套的执行依赖

执行依赖是可以嵌套的。在实现中，执行依赖被存储在 CfScope 中。

## 对环境产生副作用时

对环境产生副作用时，其所有的执行依赖都要被标记为需要保留。比如：

```js
f();
function f() {
  g();
}
function g() {
  document.write("Hello");
}
```

此时 `f()` 和 `g()` 都需要被保留。
